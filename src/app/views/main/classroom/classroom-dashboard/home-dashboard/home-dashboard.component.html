<div *ngIf="isLoading; else content" class="loading-container">
  <p>Carregando...</p>
</div>

<ng-template #content>
  <div class="dashboard-grid">
    <div class="metric-card">
      <div class="card-header">
        <div class="card-icon-background">
          <mat-icon class="card-icon">group</mat-icon>
        </div>
      </div>
      <div class="info-content">
        <span class="info-value">{{ totalStudents }}</span>
        <span class="info-label">Total de Estudantes</span>
        <span class="info-sublabel">{{ newStudentsCount }} novos este mês</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="card-header">
        <div class="card-icon-background">
          <mat-icon class="card-icon">timeline</mat-icon>
        </div>
      </div>
      <div class="info-content">
        <span class="info-value">{{ classAverage | number:'1.1-1' }}</span>
        <span class="info-label">Média da Turma</span>
        <span class="info-sublabel increased">+0.0 <mat-icon class="trend-icon">north</mat-icon></span>
      </div>
    </div>

    <div class="metric-card">
      <div class="card-header">
        <div class="card-icon-background">
          <mat-icon class="card-icon">trending_up</mat-icon>
        </div>
      </div>
      <div class="info-content">
        <span class="info-value">{{ completionRate | percent:'1.0-0' }}</span>
        <span class="info-label">Taxa de Conclusão</span>
        <span class="info-sublabel">Atividades entregues</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="card-header">
        <div class="card-icon-background">
          <mat-icon class="card-icon">menu_book</mat-icon>
        </div>
      </div>
      <div class="info-content">
        <span class="info-value">--</span>
        <span class="info-label">Estudantes Ativos</span>
        <span class="info-sublabel">Últimos 7 dias</span>
      </div>
    </div>

    <div class="chart-card large">
      <h3>Progresso Semanal</h3>
      <div class="chart-container">
        <p-chart type="line" [data]="weeklyProgressData" [options]="chartOptions"></p-chart>
      </div>
    </div>

    <div class="chart-card">
      <h3>Distribuição de Notas</h3>
      <div class="chart-container">
        <p-chart type="pie" [data]="gradeDistributionData" [options]="chartOptions"></p-chart>
      </div>
    </div>
  </div>
</ng-template>